<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
    xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:sigecComp="http://java.sun.com/jsf/composite/components">
    
    
    
    	<h:outputStylesheet library="css" name="textos.css"/>    
    	<h:outputStylesheet library="css" name="bordes.css"/>
    	<h:outputStylesheet library="css" name="botones.css"/>
    	
    	
        <h:form id="frmCurso">
        	
        	<rich:panel header="#{msg.etiqueta_actualizacion_curso}">
        		<h:panelGroup layout="block" styleClass="roundCorner">
	        		<h:panelGrid columns="2">
	        			<h:panelGrid columns="1" style="padding-left:10px; text-align:center;" >
	        				<a4j:commandButton value="#{msg['guardar']}" render="pnlCurso" 
	        					actionListener="#{edicionCursoController.btnSaveEditCurso}" image="/resources/images/save.png"/>
	        				<h:outputLabel value="#{msg['guardar']}" />
	        			</h:panelGrid>
	        			
	        			<h:panelGrid columns="1" style="padding-left:10px; text-align:center;" >
	        				<a4j:commandButton value="#{msg['guardar']}" render="pnlCurso" 
	        					actionListener="#{edicionCursoController.btnAtras}" image="/resources/images/go-back.png"/>
	        				<h:outputLabel value="#{msg['atras']}" />
	        			</h:panelGrid>
	        		</h:panelGrid>
        		</h:panelGroup>
        	</rich:panel>
        	
        	<rich:panel header="#{msg['etiqueta_actualizacion_curso']}" id="pnlCurso">
        	
	        	<fieldset>
	        		<legend>
	        			<h:outputLabel value="#{msg['datos_curso']}" styleClass="titulo"/>
	        		</legend>
	        		<h:panelGrid columns="2">
	        			<h:outputLabel value="#{msg['etiqueta_especialidad']}:" />
	        			<h:outputText value="#{edicionCursoController.curso.especialidad.nombre}" />
	        			
	        			<h:outputLabel value="#{msg['nombre']}:"/>
	        			<h:inputText value="#{edicionCursoController.curso.nombreCurso}" size="72" required="true" requiredMessage="El campo Nombre es obligatorio"/>
	        			
	        			<h:outputLabel value="#{msg['descripcion']}:" />
	        			<h:inputTextarea value="#{edicionCursoController.curso.generalidadesCurso}" style="width:40em" required="true" requiredMessage="El campo Descripcion es obligatorio"/>
	        		</h:panelGrid>
	        	</fieldset>
	        	
	        	<fieldset>
	        		<legend>
	        			<h:outputLabel value="#{msg['temas_curso']}" styleClass="titulo"/>
	        		</legend>
	        		
	        		<a4j:outputPanel ajaxRendered="true">
		        		<h:panelGroup layout="block">
		   					<a4j:commandButton id="btnNuevoTema" value="Nuevo tema" onclick="#{rich:component('popupNuevoTema')}.show()" immediate="true"/>
		   					<script>
		   						$("#frmCurso\\:btnNuevoTema").live('click',function(){
		   							$("#frmNuevoCurso\\:txtNomTem").attr('value','');
		   							$("#frmNuevoCurso\\:txtDetTem").attr('value','');
		   							$("#frmNuevoCurso\\:txtNomTem").focus();
			   					});
		   					</script>
		   				</h:panelGroup>
		        		<rich:panel rendered="#{empty edicionCursoController.curso.moduloCursoCollection}">
		        			#{msg.etiqueta_curso_no_tema}
		        		</rich:panel>
		        		<rich:dataTable id="tblTemario" style="width:100%" value="#{edicionCursoController.curso.moduloCursoCollection}" var="modulo" rows="5" rendered="#{!empty edicionCursoController.curso.moduloCursoCollection}">
		        			<f:facet name="header">
		        				<h:outputLabel value="Pensum" />
		        			</f:facet>
		        			
		        			<rich:column>
			        			<f:facet name="header">
			        				<h:outputLabel value="Tema" />
			        			</f:facet>
			        			<h:inputText value="#{modulo.nombre}" style="width:100%"/>
		        			</rich:column>
		        			
		        			<rich:column>
			        			<f:facet name="header">
			        				<h:outputLabel value="#{msg['descripcion']}" />
			        			</f:facet>
			        			<h:inputText value="#{modulo.generalidades}" style="width:100%"/>
		        			</rich:column>
		        			
		        		</rich:dataTable>
		        		<rich:dataScroller for="tblTemario" renderIfSinglePage="false"></rich:dataScroller>
	        		</a4j:outputPanel>
	        	</fieldset>	
        	</rich:panel>
        	
        </h:form>
        
        <rich:popupPanel id="popupNuevoTema" modal="true" resizeable="false" autosized="true" keepVisualState="true">
		        <f:facet name="header">
		            <h:outputText value="Nuevo tema" />
		        </f:facet>
		        <f:facet name="controls">
		            <h:outputLink value="#" onclick="#{rich:component('popupNuevoTema')}.hide(); return false;">
		                    X
		                </h:outputLink>
		        </f:facet>
		        <h:form id="frmNuevoCurso">
			        <h:panelGrid columns="2" id="pgDatosTema">
			        	<h:outputLabel value="Tema" />
			        	<h:inputText id="txtNomTem" value="#{edicionCursoController.pensumAcademicoNuevo.tema}" tabindex="1"/>
			        	
			        	<h:outputLabel value="#{msg['descripcion']}" />
			        	<h:inputText id="txtDetTem" value="#{edicionCursoController.pensumAcademicoNuevo.descripcion}" tabindex="2"/>
			        </h:panelGrid>
			        
			        <h:panelGroup layout="block" style="text-align:right; width:100%">
			        <a4j:commandButton value="#{msg['etiqueta_aniadir_Tema']}" actionListener="#{edicionCursoController.btnAddTemaPensum}" execute="pgDatosTema" oncomplete="#{rich:component('popupNuevoTema')}.hide()"/>
			        </h:panelGroup>
		        </h:form>
		    </rich:popupPanel>


</ui:composition>
