<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:a4j="http://richfaces.org/a4j" 
	xmlns:rich="http://richfaces.org/rich" 
	xmlns:sigecComp="http://java.sun.com/jsf/composite/components">



	<h:outputStylesheet library="css" name="textos.css" />
	<h:outputStylesheet library="css" name="bordes.css" />
	<h:outputStylesheet library="css" name="botones.css" />

	<h:form id="frmCurso">

		<rich:panel header="#{msg['creacion_curso']}">
			<h:panelGroup layout="block" styleClass="roundCorner">
				<h:panelGrid columns="1" style="padding-left:10px; text-align:center;">
					<a4j:commandButton value="#{msg['guardar']}" render="pnlCurso" actionListener="#{cursoController.btnSaveCurso}" 
						image="/resources/images/save.png" />
					<h:outputLabel value="#{msg['guardar']}" />
				</h:panelGrid>
			</h:panelGroup>
		</rich:panel>

		<rich:panel header="#{msg['creacion_curso']}" id="pnlCurso">

			<fieldset>
				<legend>
					<h:outputLabel value="#{msg['datos_curso']}" styleClass="titulo" />
				</legend>
				<h:panelGrid columns="2">
					<h:outputLabel value="#{msg.etiqueta_departamento}:" />
					<rich:select value="#{cursoController.curso.especialidad.idEspecialidad}" enableManualInput="false" 
						defaultLabel="Seleccione una especialidad" required="true" requiredMessage="El campo Especialidad es obligatorio">
						<f:selectItems value="#{cursoController.itemEspecialidades}" />
					</rich:select>

					<h:outputLabel value="#{msg['nombre']}:" />
					<h:inputText value="#{cursoController.curso.nombreCurso}" size="72" required="true" 
						requiredMessage="El campo Nombre es obligatorio" />
					<h:outputLabel value="#{msg.etiqueta_generalidades} :" />
					<h:inputTextarea value="#{cursoController.curso.generalidadesCurso}" cols="70"  
						required="true" requiredMessage="El campo Descripcion es obligatorio" />
					<h:outputLabel value="#{msg.etiqueta_nivel_curso} :" />
					<h:selectOneRadio value="#{cursoController.curso.nivelCurso}">
						<f:selectItem itemLabel="#{msg.etiqueta_nivelCurso_Basico}"  itemValue="B"/>
						<f:selectItem itemLabel="#{msg.etiqueta_nivelCurso_Intermedio}"  itemValue="I"/>
						<f:selectItem itemLabel="#{msg.etiqueta_nivelCurso_Avanzado}"  itemValue="A"/>
					</h:selectOneRadio>
					
					<h:outputLabel value="#{msg.etiqueta_objetivoGeneral} :" />
					<h:inputTextarea cols="70" value="#{cursoController.curso.objetivoGeneral}"/>
					
					<h:outputLabel value="#{msg.etiqueta_objetivosEspecificos} :" />
					<h:inputTextarea cols="70" rows="6" value="#{cursoController.curso.objetivosEspecificos}"/>
					
					<h:outputLabel value="#{msg.etiqueta_perfil_participante} :" />
					<h:inputTextarea cols="70" rows="6" value="#{cursoController.curso.perfilParticipante}"/>
					
					<h:outputLabel value="#{msg.etiqueta_perfil_docente} :" />
					<h:inputTextarea cols="70" rows="6" value="#{cursoController.curso.perfilDocente}"/>
					
				</h:panelGrid>
			</fieldset>

			<fieldset>
				<legend>
					<h:outputLabel value="#{msg.etiqueta_modulos_curso}" styleClass="titulo" />
				</legend>

				<a4j:outputPanel ajaxRendered="true">
					<h:panelGroup layout="block">
						<a4j:commandButton id="btnNuevoModulo" value="Nuevo #{msg.etiqueta_modulo}" onclick="#{rich:component('popupNuevoModulo')}.show()" immediate="true" />
						<script>
							$("#frmCurso\\:btnNuevoModulo").live('click',function(){
								$("#frmNuevoCurso\\:txtNomTem").attr('value','');
								$("#frmNuevoCurso\\:txtDetTem").attr('value','');
								$("#frmNuevoCurso\\:txtNomTem").focus();
							});
						</script>
					</h:panelGroup>
					<rich:panel rendered="#{empty cursoController.lstPensumAcademicos}">
			   			#{msg.etiqueta_curso_sin_modulos}
			   		</rich:panel>
					<rich:dataTable id="tblTemario" style="width:100%" value="#{cursoController.lstModuloCursos}" var="modulo" rows="5" rendered="#{!empty cursoController.lstModuloCursos}">
						<f:facet name="header">
							<h:outputLabel value="#{msg.etiqueta_modulos}" />
						</f:facet>

						<rich:column>
							<f:facet name="header">
								<h:outputLabel value="#{msg.nombre}" />
							</f:facet>
							<h:inputText value="#{modulo.nombre}" style="width:100%"/>
						</rich:column>

						<rich:column>
							<f:facet name="header">
								<h:outputLabel value="#{msg['descripcion']}" />
							</f:facet>
							<h:inputText value="#{modulo.generalidades}" style="width:100%"/>
						</rich:column>
						
						<rich:column>
							<f:facet name="header">
								<h:outputLabel value="Nivel orden" />
							</f:facet>
							<h:inputText value="#{modulo.nivel}" />
						</rich:column>
						
					</rich:dataTable>
					<rich:dataScroller for="tblTemario" renderIfSinglePage="false" />
				</a4j:outputPanel>
			</fieldset>
		</rich:panel>

	</h:form>

	<rich:popupPanel id="popupNuevoModulo" header="#{msg.etiqueta_agregar_modulos_curso}" modal="true" resizeable="false" autosized="true" keepVisualState="true">
		<f:facet name="controls">
			<h:outputLink value="#" onclick="#{rich:component('popupNuevoModulo')}.hide(); return false;">
	                X
	            </h:outputLink>
		</f:facet>

		<h:form id="frmNuevoCurso">
			<h:panelGrid columns="2" id="pgDatosTema">
				<h:outputLabel value="#{msg.etiqueta_nombre_modulo} :" />
				<h:inputText id="txtNomTem" value="#{cursoController.moduloCurso.nombre}" tabindex="1" 
					required="true" requiredMessage="El campo #{msg.etiqueta_nombre_modulo} es obligatorio" />

				<h:outputLabel value="#{msg['descripcion']} :" />
				<h:inputText id="txtDetTem" value="#{cursoController.moduloCurso.generalidades}" tabindex="2" 
					required="true" requiredMessage="El campo #{msg['descripcion']} es obligatorio" />
					
				<h:outputLabel value="Orden :" />
				<h:inputText id="txtTiempoTem" value="#{cursoController.moduloCurso.nivel}" tabindex="3" 
					required="true" requiredMessage="El campo Orden es obligatorio" />
			</h:panelGrid>

			

			<h:panelGrid columns="2" style="text-align:center; width:100%">
				<a4j:commandButton value="#{msg['agregar']}" styleClass="btnAux addBtn" style="width:70px" 
					actionListener="#{cursoController.btnAddModuloCurso}" render="pgDatosTema" 
						execute="pgDatosTema" oncomplete="if(#{(facesContext.maximumSeverity.ordinal != 2)} ) #{rich:component('popupNuevoModulo')}.hide()" />

				<a4j:commandButton value="#{msg['cancelar']}" styleClass="btnAux removeBtn" style="width:70px" immediate="true"
					oncomplete="#{rich:component('popupNuevoModulo')}.hide()" />
			</h:panelGrid>

		</h:form>
	</rich:popupPanel>
</ui:composition>
