<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
    xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:sigecComp="http://java.sun.com/jsf/composite/components">  
    
   	<h:outputStylesheet library="css" name="textos.css"/>    
   	<h:outputStylesheet library="css" name="bordes.css"/>
   	<h:outputStylesheet library="css" name="botones.css"/>
   	<h:outputScript library="js" name="validaciones.js" target="head"/>
    <h:form id="frmPresupuesto">
       	
        <rich:panel header="#{msg['creacion_presupuesto']}">
       		<h:panelGroup layout="block" styleClass="roundCorner">
       			<h:panelGrid columns="1" style="padding-left:10px; text-align:center;" >
       				<a4j:commandButton value="#{msg['guardar']}" render="pnlPresupuesto" 
       					actionListener="#{presupuestoAdmController.btnSavePresupuesto}" image="/resources/images/save.png"/>
       				<h:outputLabel value="#{msg['guardar']}" />
       			</h:panelGrid>
       		</h:panelGroup>
        </rich:panel>
       	
        <rich:panel header="#{msg['creacion_presupuesto']}" id="pnlPresupuesto">
       		
       		<rich:collapsiblePanel header="#{msg['datos_presupuesto']}"  headerClass="headerDivCollap" styleClass="mainDivCollap" 
				leftCollapsedIcon="triangleDown" leftExpandedIcon="triangleUp" switchType="client">
				
        		<h:panelGrid columns="2">
        			<h:outputLabel value="#{msg['etiqueta_anio']}" />
        			<rich:inputNumberSpinner value="#{presupuestoAdmController.presupuesto.codigoAnio}" minValue="2000" maxValue="2100"/>
        		    
        			<h:outputLabel value="Cantidad" />
        			<sigecComp:textField value="#{presupuestoAdmController.presupuesto.recursoInicial}" required="true" label="Cantidad" editMode="true" onkeypressScript="return validateNumPP(event);"/>
        		</h:panelGrid>
        		
        		
        	</rich:collapsiblePanel>
        	
        	<rich:collapsiblePanel id="rcpDetalles" header="Detalles presupuesto"  headerClass="headerDivCollap" styleClass="mainDivCollap" 
				leftCollapsedIcon="triangleDown" leftExpandedIcon="triangleUp" switchType="client">
				<a4j:commandButton value="Agregar detalle" 
					action="#{presupuestoAdmController.btnAgregarPresupuesto}" render="pnlPresupuesto" execute="@this tblPreDetalleCont" limitRender="true"/>
				
				
				<h:panelGroup layout="block" id="tblPreDetalle">
					<rich:dataTable id="tblPreDetalleCont" value="#{presupuestoAdmController.presupuesto.lstPresupuestoDetalles}" var="presuDetalle"
						noDataLabel="sin detalles" >
						<rich:column>
							<f:facet name="header">
								#{msg.etiqueta_codigo}
							</f:facet>
							<sigecComp:textField value="#{presuDetalle.presupuestoDetallePK.idCuenta}" required="true" label="Nombre" editMode="true"></sigecComp:textField>
						</rich:column>
						
						<rich:column>
							<f:facet name="header">
								Nombre
							</f:facet>
							<sigecComp:textField value="#{presuDetalle.preDetDescripcion}" required="true" label="Nombre" editMode="true"></sigecComp:textField>
						</rich:column>
						
						<rich:column>
							<f:facet name="header">
								Valor
							</f:facet>
							<h:inputText value="#{presuDetalle.preDetValorInicial}" onkeypress="return validateNumPP(event);"/>
						</rich:column>
						
						<rich:column>
							<f:facet name="header">
								#{msg.etiqueta_accion}
							</f:facet>
							<a4j:commandButton action="#{presupuestoAdmController.btnEliminarDetalle(presuDetalle)}" 
								execute="@this tblPreDetalleCont" render="tblPreDetalleCont" immediate="true" limitRender="true"/>
						</rich:column>
					</rich:dataTable>
				</h:panelGroup>
			</rich:collapsiblePanel>	
       	</rich:panel>
       	
       </h:form>
</ui:composition>